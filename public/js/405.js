"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[405],{9633:(t,e,i)=>{i.d(e,{Z:()=>n});var s=i(3645),a=i.n(s)()((function(t){return t[1]}));a.push([t.id,".selectedColor{background-color:#3f51b5}.seatColor{background-color:#a9a9a9}.seatColor:hover,.selectedColor:hover{cursor:pointer}",""]);const n=a},405:(t,e,i)=>{i.r(e),i.d(e,{default:()=>d});function s(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function a(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach((function(e){n(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const r={components:{},props:{idAuditorium:Number,nameAuditorium:String,scheduleName:String,scheduleId:Number},data:function(){return{loading:!1,seats:[],activeClass:"selectedColor",seatClass:"seatColor",seatsSelected:[],bookerEmail:"",email:"",alert:!1,messageAlert:"",typeAlert:"error",token_id:""}},mounted:function(){this.getAuditorium()},methods:{getAuditorium:function(){var t=this;this.idAuditorium&&(this.loading=!0,axios.get("/api/show-auditorium/".concat(this.idAuditorium)).then((function(e){t.seats=e.data.auditorium.seats})).catch((function(t){console.warn(t.response)})).then((function(){return t.loading=!1})))},saveBooking:function(){var t=this;if(this.validations()){var e={auditorium_id:this.idAuditorium,seats_ids:this.seatsSelected,schedule_id:this.scheduleId,email:this.email};axios.post("/api/save-booking",e).then((function(e){t.token_id=e.data.token_id,t.alert=!0,t.messageAlert="Boletos agendados",t.typeAlert="success",setTimeout((function(){t.goToShowBooking()}),600)})).catch(this.handleError)}},changeStatus:function(t){this.seats[t].status=!this.seats[t].status},addSeatToArray:function(t){if(this.changeStatus(t),this.seatsSelected.includes(this.seats[t].id)||this.seats[t].status||this.seatsSelected.push(this.seats[t].id),this.seatsSelected.includes(this.seats[t].id)&&this.seats[t].status){var e=this.seatsSelected.indexOf(this.seats[t].id);this.seatsSelected.splice(e,1)}},validations:function(){var t=!0;return this.alert=!1,!this.email&&this.seatsSelected.length<1?(this.messageAlert="Seleciona un asiento y agrega un correo electrónico",this.alert=!0,t=!1):(this.seatsSelected.length<1&&(this.messageAlert="Seleciona un asiento",this.alert=!0,t=!1),this.email||(this.messageAlert="Incresa un correo electrónico",this.alert=!0,t=!1)),t},goToShowBooking:function(){if(this.token_id){var t=a(a({},{name:"booking-detail"}),{params:{token_id:this.token_id}});this.$router.push(t)}}},computed:{}};var o=i(3379),l=i.n(o),c=i(9633),u={insert:"head",singleton:!1};l()(c.Z,u);c.Z.locals;const d=(0,i(1900).Z)(r,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{display:"flex","flex-direction":"column",height:"90vh","justify-content":"center","text-align":"center"}},[i("v-alert",{staticStyle:{margin:"auto","text-align":"center","margin-top":"20px"},attrs:{border:"bottom","colored-border":"",type:t.typeAlert},model:{value:t.alert,callback:function(e){t.alert=e},expression:"alert"}},[t._v(t._s(t.messageAlert))]),t._v(" "),t.nameAuditorium?i("h3",{staticStyle:{"text-align":"center","margin-top":"20px"}},[t._v("Sala "+t._s(t.nameAuditorium))]):t._e(),t._v(" "),t.scheduleName?i("h5",{staticStyle:{"text-align":"center","margin-top":"20px"}},[t._v(t._s(t.scheduleName))]):t._e(),t._v(" "),t._m(0),t._v(" "),i("div",{staticStyle:{margin:"auto","max-width":"800px",display:"flex","justify-content":"center","flex-wrap":"wrap",height:"auto"}},t._l(t.seats,(function(e,s){return i("div",{key:s,staticStyle:{height:"35px",width:"35px","text-align":"center",display:"flex","justify-content":"center","align-items":"center",margin:"20px"}},[i("div",{class:[0==e.status?t.activeClass:t.seatClass],staticStyle:{height:"100%",width:"100%"},on:{click:function(e){return t.addSeatToArray(s)}}},[i("p",{staticStyle:{color:"white"}},[t._v(t._s(e.name))])])])})),0),t._v(" "),i("div",{staticStyle:{margin:"auto","max-width":"200px",display:"flex","justify-content":"center","flex-direction":"column"}},[i("v-text-field",{attrs:{label:"Correo",outlined:"",dense:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),t._v(" "),i("v-btn",{staticClass:"mt-5",attrs:{color:"primary",elevation:"2"},on:{click:t.saveBooking}},[t._v("AGENDAR")])],1)],1)}),[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{margin:"auto","max-width":"800px",width:"800px",display:"flex",height:"30px","background-color":"black","text-align":"center","justify-content":"center"}},[i("p",{staticStyle:{color:"white"}},[t._v("P A N T A L L A")])])}],!1,null,null,null).exports}}]);